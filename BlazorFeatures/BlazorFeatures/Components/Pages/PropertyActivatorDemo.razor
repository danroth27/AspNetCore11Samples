@page "/property-activator"
@using BlazorFeatures.Services
@rendermode InteractiveServer

<PageTitle>IComponentPropertyActivator Demo</PageTitle>

<h1>IComponentPropertyActivator Demo</h1>

<p>
    This page demonstrates the new <code>IComponentPropertyActivator</code> interface for customizing
    how <code>[Inject]</code> properties are populated in Blazor components.
</p>

<div class="alert alert-info">
    <h4>How it works</h4>
    <p>
        A custom <code>LoggingPropertyActivator</code> is registered that logs all property injections.
        Check the server console/logs to see the injection messages when this component loads.
    </p>
</div>

<div class="card mb-3">
    <div class="card-header">
        <strong>Standard Service Injection</strong>
        <code>[Inject]</code>
    </div>
    <div class="card-body">
        <p><strong>Service Type:</strong> @SampleService?.ServiceType</p>
        <p><strong>Message:</strong> @SampleService?.GetMessage()</p>
    </div>
</div>

<div class="card mb-3">
    <div class="card-header">
        <strong>Keyed Service Injection</strong>
        <code>[Inject(Key = "premium")]</code>
    </div>
    <div class="card-body">
        <p><strong>Service Type:</strong> @PremiumService?.ServiceType</p>
        <p><strong>Message:</strong> @PremiumService?.GetMessage()</p>
    </div>
</div>

<div class="card mb-3">
    <div class="card-header">
        <strong>NavigationManager (Framework Service)</strong>
    </div>
    <div class="card-body">
        <p><strong>Current URI:</strong> @NavigationManager?.Uri</p>
    </div>
</div>

<h3 class="mt-4">Use Cases</h3>
<ul>
    <li><strong>Blazor Hybrid:</strong> Custom context for property resolution in .NET MAUI</li>
    <li><strong>Custom DI Containers:</strong> Intercept property injection for containers like Autofac</li>
    <li><strong>Logging/Diagnostics:</strong> Log all service resolutions for debugging</li>
    <li><strong>Lazy Injection:</strong> Wrap services in lazy proxies</li>
    <li><strong>Feature Flags:</strong> Conditionally inject different implementations</li>
</ul>

@code {
    [Inject]
    public ISampleService? SampleService { get; set; }
    
    [Inject(Key = "premium")]
    public ISampleService? PremiumService { get; set; }
    
    [Inject]
    public NavigationManager? NavigationManager { get; set; }
}
